<!DOCTYPE html>

<html>
<head>
 	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  	<title>活動報名表單</title>
  	<link rel="stylesheet" href="./style.css">
  	<link rel="stylesheet" type="text/css" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">
  	<link href='https://fonts.googleapis.com/css?family=Questrial' rel='stylesheet'>
</head>

<body>
	<section class="form">
		<div class="form__title">
			<h1>新拖延運動報名表單</h1>
			<div class="form__desc">活動日期：2020/12/10 ~ 2020/12/11</div>
			<div class="form__desc">活動地點：台北市大安區新生南路二段1號</div>
			<div class="form__required">*必填</div>
		</div>
		<form class="form__content">
			<div class="form__block required hide-error">
				<div class="form__Ques">
					暱稱 <span class="form__required">*</span>
				</div>
				<div class="form__Ans">
					<input type="text" name="user-name" placeholder="您的回答" data-value="0"> 
				</div>
				<div class="form__error">請填寫暱稱</div>
			</div>
			<div class="form__block required hide-error">	
				<div class="form__Ques">
					電子郵件 <span class="form__required">*</span>
				</div>
				<div class="form__Ans">
					<input type="text" name="email" placeholder="您的回答">
				</div>
				<div class="form__error">請填寫電子郵件</div>
			</div>
			<div class="form__block required hide-error">
				<div class="form__Ques">
					手機號碼 <span class="form__required">*</span>
				</div>
				<div class="form__Ans">
					<input type="text" name="tel" placeholder="您的回答">
				</div>
				<div class="form__error">請填寫手機號碼</div>
			</div>
			<div class="form__block required hide-error">
				<div class="form__Ques">
					報名類型 <span class="form__required">*</span>
				</div>
				<div class="form__Ans">
					<input type="radio" name="sign-up-type" id="1"><label for="1" class="form__desc">躺在床上用想像力實作</label><br>
					<input type="radio" name="sign-up-type" id="2"><label for="2" class="form__desc">趴在地上滑手機找現成的</label>
				</div>
				<div class="form__error">請選擇報名類型</div>
			</div>
			<div class="form__block required hide-error">
				<div class="form__Ques">
					怎麼知道這個活動的？ <span class="form__required">*</span>
				</div>
				<div class="form__Ans">
					<input type="text" name="how" placeholder="您的回答">
				</div>
				<div class="form__error">請填寫答案</div>
			</div>
			<div class="form__block">
				<div class="form__Ques">
					其他
					<div class="form__desc">對活動的一些建議</div>
				</div>
				<div class="form__Ans">
					<input type="text" placeholder="您的回答">
				</div>
			</div>
			<input type="submit" name="submit" class="submit-buttom">

			<div class="form__desc">請勿透過表單送出您的密碼。</div>
		</div>
		</form>
	</section>
	<footer class="footer">
		© 2020 © Copyright. All rights Reserved.
	</footer>



	<script>
	document.querySelector('.form__content').addEventListener('submit',
		function(e){
			e.preventDefault()
			
			let values = {}
			let hasError = false
			const requireds = document.querySelectorAll('.required')
			for(required of requireds){
				const radios = required.querySelectorAll('input[type=radio]')
				const input = required.querySelector('input[type=text]')
				let isValid = true
				if(input){
					values[input.name] = input.value
					if(!input.value){
						isValid = false
					}
					console.log(input.value)
				}else if(radios.length){
					isValid =  [...radios].some(radio => radio.checked)
					if(isValid){
						let r = required.querySelector('input[type=radio]:checked')
						values[r.name] = r.id
					}
				}else{
					continue
				}

				if(!isValid){
					required.classList.remove('hide-error')
					hasError = true
				}else{
					required.classList.add('hide-error')
				}
			}
			if(!hasError){
				alert(JSON.stringify(values))
			}
		}

	)
	</script>
</body>
</html>